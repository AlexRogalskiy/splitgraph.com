{"version": 2, "width": 100, "height": 60, "env": {"TERM": "xterm-256color", "SHELL": "/bin/zsh"}, "timestamp": 1583530623, "metadata": {"tss": [{"h": "This example will use Splitgraph to build a dataset that correlates, for every US county,", "ts": 0.06}, {"h": "Now, build the dataset: the Splitgraph engine will automatically download the required data", "ts": 32.38857142857143}, {"h": "Inspect the dataset metadata", "ts": 46.19168962887364}, {"h": "Get the data for New York County (FIPS 36061)", "ts": 63.00597534315935}, {"h": "Do a quick analysis of the dataset.", "ts": 72.49264734404451}]}}
[0.03, "o", "\u001b[H"]
[0.06, "o", "\u001b[J"]
[0.09, "o", "\u001b[1m\u001b[36m\u001b[91m$ # This example will use Splitgraph to build a dataset that correlates, for every US county,"]
[0.12, "o", "\r\n"]
[0.15, "o", "$ # its voting pattern in the 2016 US Presidential election with the amount of\r\n"]
[0.18, "o", "$ # Qualified Opportunity Zone areas in it.\r\n"]
[0.21, "o", "$"]
[0.24, "o", " "]
[0.27, "o", "#"]
[0.30000000000000004, "o", "\r\n"]
[0.33000000000000007, "o", "$ # First, examine the Splitfile used to build the dataset.\r\n"]
[0.3600000000000001, "o", "$"]
[0.3900000000000001, "o", " "]
[0.42000000000000015, "o", "c"]
[0.4500000000000002, "o", "a"]
[0.4800000000000002, "o", "t"]
[0.5100000000000002, "o", " "]
[0.5400000000000003, "o", "q"]
[0.5700000000000003, "o", "o"]
[0.6000000000000003, "o", "z"]
[0.6300000000000003, "o", "_"]
[0.6600000000000004, "o", "v"]
[0.6900000000000004, "o", "o"]
[0.7200000000000004, "o", "t"]
[0.7500000000000004, "o", "e"]
[0.7800000000000005, "o", "_"]
[0.8100000000000005, "o", "f"]
[0.8400000000000005, "o", "r"]
[0.8700000000000006, "o", "a"]
[0.9000000000000006, "o", "c"]
[0.9300000000000006, "o", "t"]
[0.9600000000000006, "o", "i"]
[0.9900000000000007, "o", "o"]
[1.0200000000000007, "o", "n"]
[1.0500000000000007, "o", "."]
[1.0800000000000007, "o", "s"]
[1.1100000000000008, "o", "p"]
[1.1400000000000008, "o", "l"]
[1.1700000000000008, "o", "i"]
[1.2000000000000008, "o", "t"]
[1.2300000000000009, "o", "f"]
[1.260000000000001, "o", "i"]
[1.290000000000001, "o", "l"]
[1.320000000000001, "o", "e"]
[1.350000000000001, "o", "\r\n"]
[1.380000000000001, "o", "\u001b[0m"]
[1.410000000000001, "o", "\r\n"]
[1.4107057189941417, "o", "# Calculate the number of Census tracts in each county.\r\n"]
[1.4107216930389415, "o", "# See the README for data sources.\r\n"]
[1.4107262229919444, "o", "\r\n"]
[1.410729799270631, "o", "FROM splitgraph/census IMPORT {\r\n"]
[1.4107333755493174, "o", "     SELECT COUNT(*) AS total_tract_count,\r\n"]
[1.410737190246583, "o", "         substring(lpad(\"TractId\"::text, 11, '0') from 0 for 6) AS county_id\r\n"]
[1.4107407665252696, "o", "     FROM acs2017_census_tract_data GROUP BY county_id\r\n"]
[1.4107445812225352, "o", "} AS county_tracts\r\n"]
[1.4107481575012217, "o", "\r\n"]
[1.4107514953613292, "o", "\r\n"]
[1.4107550716400157, "o", "# Calculate the number of QOZ-eligible census tracts in each county\r\n"]
[1.410758409500123, "o", "\r\n"]
[1.4107619857788096, "o", "FROM splitgraph/qoz IMPORT {\r\n"]
[1.4107660388946544, "o", "    SELECT COUNT(*) AS qoz_tract_count,\r\n"]
[1.410770092010499, "o", "        substring(lpad(\"Census Tract Number\"::text, 11, '0') from 0 for 6) AS county_id\r\n"]
[1.4107741451263438, "o", "    FROM qoz GROUP BY county_id\r\n"]
[1.4107779598236094, "o", "} AS qoz_tracts\r\n"]
[1.4107812976837169, "o", "\r\n"]
[1.4107848739624034, "o", "\r\n"]
[1.410788927078248, "o", "# Summarize the Trump/Clinton vote fraction in each county.\r\n"]
[1.4107927417755137, "o", "\r\n"]
[1.4107963180542002, "o", "FROM splitgraph/2016_election IMPORT {\r\n"]
[1.4107996559143077, "o", "    WITH\r\n"]
[1.410802993774415, "o", "        by_candidate AS (SELECT\r\n"]
[1.4108068084716807, "o", "                lpad(county_fips::text, 5, '0') AS county_id,\r\n"]
[1.4108103847503672, "o", "                candidate, SUM(votes) AS votes\r\n"]
[1.4108139610290538, "o", "                FROM precinct_results GROUP BY county_id, candidate),\r\n"]
[1.4108172988891612, "o", "        total_votes AS (SELECT\r\n"]
[1.4108206367492686, "o", "                county_id, SUM(votes) AS votes FROM by_candidate GROUP BY county_id),\r\n"]
[1.410823974609376, "o", "        trump_votes AS (SELECT\r\n"]
[1.4108273124694835, "o", "                county_id, votes FROM by_candidate WHERE candidate = 'Donald Trump'),\r\n"]
[1.4108306503295909, "o", "        clinton_votes AS (SELECT\r\n"]
[1.4108339881896983, "o", "                county_id, votes FROM by_candidate WHERE candidate = 'Hillary Clinton')\r\n"]
[1.4108373260498057, "o", "        SELECT v.county_id, (t.votes::numeric / v.votes) AS trump_vote_fraction,\r\n"]
[1.4108406639099131, "o", "            (hc.votes::numeric / v.votes) AS clinton_vote_fraction,\r\n"]
[1.4108435249328624, "o", "            v.votes AS total_votes\r\n"]
[1.4108471012115489, "o", "        FROM total_votes v JOIN trump_votes t ON v.county_id = t.county_id\r\n"]
[1.4108504390716563, "o", "            JOIN clinton_votes hc ON hc.county_id = v.county_id\r\n"]
[1.410854253768922, "o", "} AS vote_fraction\r\n"]
[1.4108585453033458, "o", "\r\n"]
[1.4108621215820323, "o", "\r\n"]
[1.410865936279298, "o", "# Create the final table: join the fraction of QOZ-eligible tracts in every county\r\n"]
[1.4108697509765635, "o", "# with the vote fraction for each candidate.\r\n"]
[1.41087332725525, "o", "\r\n"]
[1.4108771419525157, "o", "SQL { CREATE TABLE qoz_vote_fraction AS\r\n"]
[1.4108814334869395, "o", "    SELECT v.county_id, (COALESCE(q.qoz_tract_count::numeric, 0.0) / t.total_tract_count)\r\n"]
[1.4108854866027842, "o", "        AS qoz_tract_fraction, trump_vote_fraction, clinton_vote_fraction, total_votes\r\n"]
[1.4108890628814708, "o", "    FROM vote_fraction v\r\n"]
[1.4108928775787364, "o", "    JOIN county_tracts t ON t.county_id = v.county_id\r\n"]
[1.410896453857423, "o", "    LEFT JOIN qoz_tracts q ON t.county_id = q.county_id;\r\n"]
[1.4108997917175303, "o", "    ALTER TABLE qoz_vote_fraction ADD PRIMARY KEY (county_id);\r\n"]
[1.4109033679962169, "o", "}\r\n"]
[1.4409033679962169, "o", "\u001b[1m"]
[1.470903367996217, "o", "\u001b[36m"]
[1.500903367996217, "o", "\u001b[91m"]
[1.530903367996217, "o", "$"]
[1.560903367996217, "o", " "]
[1.590903367996217, "o", "\u001b[0m"]
[32.35857142857143, "o", "\u001b[H"]
[32.38857142857143, "o", "\u001b[J"]
[32.41857142857143, "o", "\u001b[1m\u001b[36m\u001b[91m$ # Now, build the dataset: the Splitgraph engine will automatically download the required data"]
[32.448571428571434, "o", "\r\n"]
[32.478571428571435, "o", "$ # and run the queries in the Splitfile to produce the final data image.\r\n"]
[32.508571428571436, "o", "$"]
[32.53857142857144, "o", " "]
[32.56857142857144, "o", "s"]
[32.59857142857144, "o", "g"]
[32.62857142857144, "o", "r"]
[32.65857142857144, "o", " "]
[32.68857142857144, "o", "b"]
[32.718571428571444, "o", "u"]
[32.748571428571445, "o", "i"]
[32.778571428571446, "o", "l"]
[32.80857142857145, "o", "d"]
[32.83857142857145, "o", " "]
[32.86857142857145, "o", "q"]
[32.89857142857145, "o", "o"]
[32.92857142857145, "o", "z"]
[32.95857142857145, "o", "_"]
[32.988571428571454, "o", "v"]
[33.018571428571455, "o", "o"]
[33.04857142857146, "o", "t"]
[33.07857142857146, "o", "e"]
[33.10857142857146, "o", "_"]
[33.13857142857146, "o", "f"]
[33.16857142857146, "o", "r"]
[33.19857142857146, "o", "a"]
[33.22857142857146, "o", "c"]
[33.258571428571464, "o", "t"]
[33.288571428571466, "o", "i"]
[33.31857142857147, "o", "o"]
[33.34857142857147, "o", "n"]
[33.37857142857147, "o", "."]
[33.40857142857147, "o", "s"]
[33.43857142857147, "o", "p"]
[33.46857142857147, "o", "l"]
[33.49857142857147, "o", "i"]
[33.528571428571475, "o", "t"]
[33.558571428571476, "o", "f"]
[33.58857142857148, "o", "i"]
[33.61857142857148, "o", "l"]
[33.64857142857148, "o", "e"]
[33.67857142857148, "o", " "]
[33.70857142857148, "o", "-"]
[33.73857142857148, "o", "o"]
[33.768571428571484, "o", " "]
[33.798571428571485, "o", "q"]
[33.828571428571486, "o", "o"]
[33.85857142857149, "o", "z"]
[33.88857142857149, "o", "_"]
[33.91857142857149, "o", "v"]
[33.94857142857149, "o", "o"]
[33.97857142857149, "o", "t"]
[34.00857142857149, "o", "e"]
[34.038571428571494, "o", "_"]
[34.068571428571495, "o", "f"]
[34.098571428571496, "o", "r"]
[34.1285714285715, "o", "a"]
[34.1585714285715, "o", "c"]
[34.1885714285715, "o", "t"]
[34.2185714285715, "o", "i"]
[34.2485714285715, "o", "o"]
[34.2785714285715, "o", "n"]
[34.308571428571504, "o", "\r\n"]
[34.338571428571505, "o", "\u001b[0m"]
[34.36857142857151, "o", "\r\n"]
[34.85827055386142, "o", "Executing Splitfile qoz_vote_fraction.splitfile with arguments {}\r\n"]
[34.8835073988779, "o", "\u001b[1m\r\n"]
[34.88351598194675, "o", "Step 1/4 : FROM splitgraph/census IMPORT {     SELECT COUNT(*) AS t...\u001b[0m\r\n"]
[34.89578500202732, "o", "Resolving repository splitgraph/census\r\n"]
[35.89578500202732, "o", "Importing 1 table(s) from splitgraph/census:17a596cf4642 into qoz_vote_fraction\r\n"]
[36.89578500202732, "o", " ---> 65732f0b5673\r\n"]
[36.90005841663913, "o", "\u001b[1m\r\n"]
[36.90006771496372, "o", "Step 2/4 : FROM splitgraph/qoz IMPORT {    SELECT COUNT(*) AS qoz_t...\u001b[0m\r\n"]
[36.90157165936069, "o", "Resolving repository splitgraph/qoz\r\n"]
[37.80819311550693, "o", "Importing 1 table(s) from splitgraph/qoz:5818ea35bf99 into qoz_vote_fraction\r\n"]
[38.80819311550693, "o", " ---> 59258e50b49d\r\n"]
[38.812432436261936, "o", "\u001b[1m\r\n"]
[38.81244745663242, "o", "Step 3/4 : FROM splitgraph/2016_election IMPORT {    WITH        b...\u001b[0m\r\n"]
[38.81368341854648, "o", "Resolving repository splitgraph/2016_election\r\n"]
[39.81368341854648, "o", "Importing 1 table(s) from splitgraph/2016_election:3835145ada3f into qoz_vote_fraction\r\n"]
[40.81368341854648, "o", " ---> 71664ba11373\r\n"]
[40.81743278912143, "o", "\u001b[1m\r\n"]
[40.817445902143284, "o", "Step 4/4 : SQL { CREATE TABLE qoz_vote_fraction AS    SELECT v.coun...\u001b[0m\r\n"]
[40.82135239056186, "o", "Executing SQL...\r\n"]
[40.95168962887363, "o", " ---> 63a21276dc4d\r\n"]
[40.98168962887363, "o", "\u001b[1m"]
[41.01168962887363, "o", "\u001b[36m"]
[41.041689628873634, "o", "\u001b[91m"]
[41.071689628873635, "o", "$"]
[41.101689628873636, "o", " "]
[41.13168962887364, "o", "\u001b[0m"]
[46.16168962887364, "o", "\u001b[H"]
[46.19168962887364, "o", "\u001b[J"]
[46.22168962887364, "o", "\u001b[1m\u001b[36m\u001b[91m$ # Inspect the dataset metadata"]
[46.25168962887364, "o", "\r\n"]
[46.28168962887364, "o", "$"]
[46.311689628873644, "o", " "]
[46.341689628873645, "o", "s"]
[46.371689628873646, "o", "g"]
[46.40168962887365, "o", "r"]
[46.43168962887365, "o", " "]
[46.46168962887365, "o", "s"]
[46.49168962887365, "o", "h"]
[46.52168962887365, "o", "o"]
[46.55168962887365, "o", "w"]
[46.581689628873654, "o", " "]
[46.611689628873656, "o", "q"]
[46.64168962887366, "o", "o"]
[46.67168962887366, "o", "z"]
[46.70168962887366, "o", "_"]
[46.73168962887366, "o", "v"]
[46.76168962887366, "o", "o"]
[46.79168962887366, "o", "t"]
[46.82168962887366, "o", "e"]
[46.851689628873665, "o", "_"]
[46.881689628873666, "o", "f"]
[46.91168962887367, "o", "r"]
[46.94168962887367, "o", "a"]
[46.97168962887367, "o", "c"]
[47.00168962887367, "o", "t"]
[47.03168962887367, "o", "i"]
[47.06168962887367, "o", "o"]
[47.091689628873674, "o", "n"]
[47.121689628873675, "o", "\r\n"]
[47.151689628873676, "o", "$"]
[47.18168962887368, "o", " "]
[47.21168962887368, "o", "s"]
[47.24168962887368, "o", "g"]
[47.27168962887368, "o", "r"]
[47.30168962887368, "o", " "]
[47.33168962887368, "o", "t"]
[47.361689628873684, "o", "a"]
[47.391689628873685, "o", "b"]
[47.421689628873686, "o", "l"]
[47.45168962887369, "o", "e"]
[47.48168962887369, "o", " "]
[47.51168962887369, "o", "q"]
[47.54168962887369, "o", "o"]
[47.57168962887369, "o", "z"]
[47.60168962887369, "o", "_"]
[47.631689628873694, "o", "v"]
[47.661689628873695, "o", "o"]
[47.6916896288737, "o", "t"]
[47.7216896288737, "o", "e"]
[47.7516896288737, "o", "_"]
[47.7816896288737, "o", "f"]
[47.8116896288737, "o", "r"]
[47.8416896288737, "o", "a"]
[47.8716896288737, "o", "c"]
[47.901689628873704, "o", "t"]
[47.931689628873706, "o", "i"]
[47.96168962887371, "o", "o"]
[47.99168962887371, "o", "n"]
[48.02168962887371, "o", " "]
[48.05168962887371, "o", "q"]
[48.08168962887371, "o", "o"]
[48.11168962887371, "o", "z"]
[48.14168962887371, "o", "_"]
[48.171689628873715, "o", "v"]
[48.201689628873716, "o", "o"]
[48.23168962887372, "o", "t"]
[48.26168962887372, "o", "e"]
[48.29168962887372, "o", "_"]
[48.32168962887372, "o", "f"]
[48.35168962887372, "o", "r"]
[48.38168962887372, "o", "a"]
[48.411689628873724, "o", "c"]
[48.441689628873725, "o", "t"]
[48.471689628873726, "o", "i"]
[48.50168962887373, "o", "o"]
[48.53168962887373, "o", "n"]
[48.56168962887373, "o", "\r\n"]
[48.59168962887373, "o", "\u001b[0m"]
[48.62168962887373, "o", "\r\n"]
[49.064514469419386, "o", "Image qoz_vote_fraction:63a21276dc4d3a237bfc67afc1ad85a3dadc9391a53a7290d610249c9957ce04\r\n"]
[49.064671348844435, "o", " CREATE TABLE qoz_vote_fraction AS\r\n"]
[49.06467993191328, "o", "    SELECT v.county_id, (COALESCE(q.qoz_tract_count::numeric, 0.0) / t.total_tract_count)\r\n"]
[49.06473286083784, "o", "        AS qoz_tract_fraction, trump_vote_fraction, clinton_vote_fraction, total_votes\r\n"]
[49.06474430492964, "o", "    FROM vote_fraction v\r\n"]
[49.06477124622908, "o", "    JOIN county_tracts t ON t.county_id = v.county_id\r\n"]
[49.064808916364576, "o", "    LEFT JOIN qoz_tracts q ON t.county_id = q.county_id;\r\n"]
[49.06482083729353, "o", "    ALTER TABLE qoz_vote_fraction ADD PRIMARY KEY (county_id);\r\n"]
[49.06485278538313, "o", "\r\n"]
[49.06489093235579, "o", "Created at 2020-03-06T21:37:37.312875\r\n"]
[49.075124096189406, "o", "Size: 226.33 KiB\r\n"]
[49.07513697079268, "o", "Parent: 71664ba113732126fcccb1951c7cd0ac11589f6f8740b8b6b34c5d7ca177ed1e\r\n"]
[49.07514221600142, "o", "\r\n"]
[49.07514674595442, "o", "Tables:\r\n"]
[49.07879645756331, "o", "  county_tracts\r\n"]
[49.07880670956221, "o", "  qoz_tracts\r\n"]
[49.07881076267805, "o", "  qoz_vote_fraction\r\n"]
[49.07881410053816, "o", "  vote_fraction\r\n"]
[49.49767167500105, "o", "Table qoz_vote_fraction:63a21276dc4d3a237bfc67afc1ad85a3dadc9391a53a7290d610249c9957ce04/qoz_vote_fraction\r\n"]
[49.49811227253523, "o", "\r\n"]
[49.50305302074995, "o", "Size: 106.94 KiB\r\n"]
[49.50306470326033, "o", "Columns: \r\n"]
[49.50306947163191, "o", "  county_id (text, PK)\r\n"]
[49.503073763166334, "o", "  qoz_tract_fraction (numeric)\r\n"]
[49.50307781628218, "o", "  trump_vote_fraction (numeric)\r\n"]
[49.5030821078166, "o", "  clinton_vote_fraction (numeric)\r\n"]
[49.50308830669966, "o", "  total_votes (numeric)\r\n"]
[49.50309259823408, "o", "\r\n"]
[49.50309593609419, "o", "Objects: \r\n"]
[49.50309951237288, "o", "  o70f017c3ad5c2b1c7ad91b6d751392bb8710d8bf5e0addf2e42a96f61bef43\r\n"]
[49.53309951237288, "o", "\u001b[1m"]
[49.56309951237288, "o", "\u001b[36m"]
[49.59309951237288, "o", "\u001b[91m"]
[49.62309951237288, "o", "$"]
[49.65309951237288, "o", " "]
[49.683099512372884, "o", "\u001b[0m"]
[62.97597534315935, "o", "\u001b[H"]
[63.00597534315935, "o", "\u001b[J"]
[63.03597534315935, "o", "\u001b[1m\u001b[36m\u001b[91m$ # Get the data for New York County (FIPS 36061)"]
[63.06597534315935, "o", "\r\n"]
[63.09597534315935, "o", "$"]
[63.125975343159354, "o", " "]
[63.155975343159355, "o", "s"]
[63.185975343159356, "o", "g"]
[63.21597534315936, "o", "r"]
[63.24597534315936, "o", " "]
[63.27597534315936, "o", "s"]
[63.30597534315936, "o", "q"]
[63.33597534315936, "o", "l"]
[63.36597534315936, "o", " "]
[63.395975343159364, "o", "-"]
[63.425975343159365, "o", "s"]
[63.455975343159366, "o", " "]
[63.48597534315937, "o", "q"]
[63.51597534315937, "o", "o"]
[63.54597534315937, "o", "z"]
[63.57597534315937, "o", "_"]
[63.60597534315937, "o", "v"]
[63.63597534315937, "o", "o"]
[63.665975343159374, "o", "t"]
[63.695975343159375, "o", "e"]
[63.72597534315938, "o", "_"]
[63.75597534315938, "o", "f"]
[63.78597534315938, "o", "r"]
[63.81597534315938, "o", "a"]
[63.84597534315938, "o", "c"]
[63.87597534315938, "o", "t"]
[63.90597534315938, "o", "i"]
[63.935975343159384, "o", "o"]
[63.965975343159386, "o", "n"]
[63.99597534315939, "o", " "]
[64.02597534315939, "o", "\\"]
[64.05597534315939, "o", "\r\n    "]
[64.08597534315939, "o", "\""]
[64.11597534315939, "o", "S"]
[64.14597534315939, "o", "E"]
[64.1759753431594, "o", "L"]
[64.2059753431594, "o", "E"]
[64.2359753431594, "o", "C"]
[64.2659753431594, "o", "T"]
[64.2959753431594, "o", " "]
[64.3259753431594, "o", "r"]
[64.3559753431594, "o", "o"]
[64.3859753431594, "o", "w"]
[64.4159753431594, "o", "_"]
[64.4459753431594, "o", "t"]
[64.4759753431594, "o", "o"]
[64.5059753431594, "o", "_"]
[64.53597534315941, "o", "j"]
[64.56597534315941, "o", "s"]
[64.59597534315941, "o", "o"]
[64.62597534315941, "o", "n"]
[64.65597534315941, "o", "("]
[64.68597534315941, "o", "d"]
[64.71597534315941, "o", ")"]
[64.74597534315942, "o", " "]
[64.77597534315942, "o", "F"]
[64.80597534315942, "o", "R"]
[64.83597534315942, "o", "O"]
[64.86597534315942, "o", "M"]
[64.89597534315942, "o", " "]
[64.92597534315942, "o", "("]
[64.95597534315942, "o", "S"]
[64.98597534315942, "o", "E"]
[65.01597534315943, "o", "L"]
[65.04597534315943, "o", "E"]
[65.07597534315943, "o", "C"]
[65.10597534315943, "o", "T"]
[65.13597534315943, "o", " "]
[65.16597534315943, "o", "*"]
[65.19597534315943, "o", " "]
[65.22597534315943, "o", "F"]
[65.25597534315943, "o", "R"]
[65.28597534315944, "o", "O"]
[65.31597534315944, "o", "M"]
[65.34597534315944, "o", " "]
[65.37597534315944, "o", "q"]
[65.40597534315944, "o", "o"]
[65.43597534315944, "o", "z"]
[65.46597534315944, "o", "_"]
[65.49597534315944, "o", "v"]
[65.52597534315944, "o", "o"]
[65.55597534315945, "o", "t"]
[65.58597534315945, "o", "e"]
[65.61597534315945, "o", "_"]
[65.64597534315945, "o", "f"]
[65.67597534315945, "o", "r"]
[65.70597534315945, "o", "a"]
[65.73597534315945, "o", "c"]
[65.76597534315945, "o", "t"]
[65.79597534315945, "o", "i"]
[65.82597534315946, "o", "o"]
[65.85597534315946, "o", "n"]
[65.88597534315946, "o", " "]
[65.91597534315946, "o", "W"]
[65.94597534315946, "o", "H"]
[65.97597534315946, "o", "E"]
[66.00597534315946, "o", "R"]
[66.03597534315946, "o", "E"]
[66.06597534315947, "o", " "]
[66.09597534315947, "o", "c"]
[66.12597534315947, "o", "o"]
[66.15597534315947, "o", "u"]
[66.18597534315947, "o", "n"]
[66.21597534315947, "o", "t"]
[66.24597534315947, "o", "y"]
[66.27597534315947, "o", "_"]
[66.30597534315947, "o", "i"]
[66.33597534315948, "o", "d"]
[66.36597534315948, "o", " "]
[66.39597534315948, "o", "="]
[66.42597534315948, "o", " "]
[66.45597534315948, "o", "'"]
[66.48597534315948, "o", "3"]
[66.51597534315948, "o", "6"]
[66.54597534315948, "o", "0"]
[66.57597534315948, "o", "6"]
[66.60597534315949, "o", "1"]
[66.63597534315949, "o", "'"]
[66.66597534315949, "o", ")"]
[66.69597534315949, "o", " "]
[66.72597534315949, "o", "d"]
[66.75597534315949, "o", "\""]
[66.78597534315949, "o", "\r\n"]
[66.8159753431595, "o", "\u001b[0m"]
[66.8459753431595, "o", "\r\n"]
[67.2526473440445, "o", "{'county_id': '36061', 'qoz_tract_fraction': 0.125, 'trump_vote_fraction': 0.08865095716546313, 'clinton_vote_fraction': 0.7905445350569275, 'total_votes': 732423}\r\n"]
[67.2826473440445, "o", "\u001b[1m"]
[67.3126473440445, "o", "\u001b[36m"]
[67.34264734404451, "o", "\u001b[91m"]
[67.37264734404451, "o", "$"]
[67.40264734404451, "o", " "]
[67.43264734404451, "o", "\u001b[0m"]
[72.46264734404451, "o", "\u001b[H"]
[72.49264734404451, "o", "\u001b[J"]
[72.52264734404451, "o", "\u001b[1m\u001b[36m\u001b[91m$ # Do a quick analysis of the dataset."]
[72.55264734404452, "o", "\r\n"]
[72.58264734404452, "o", "$"]
[72.61264734404452, "o", " "]
[72.64264734404452, "o", "c"]
[72.67264734404452, "o", "a"]
[72.70264734404452, "o", "t"]
[72.73264734404452, "o", " "]
[72.76264734404452, "o", "a"]
[72.79264734404452, "o", "n"]
[72.82264734404453, "o", "a"]
[72.85264734404453, "o", "l"]
[72.88264734404453, "o", "y"]
[72.91264734404453, "o", "z"]
[72.94264734404453, "o", "e"]
[72.97264734404453, "o", "."]
[73.00264734404453, "o", "p"]
[73.03264734404453, "o", "y"]
[73.06264734404454, "o", "\r\n"]
[73.09264734404454, "o", "$"]
[73.12264734404454, "o", " "]
[73.15264734404454, "o", "p"]
[73.18264734404454, "o", "y"]
[73.21264734404454, "o", "t"]
[73.24264734404454, "o", "h"]
[73.27264734404454, "o", "o"]
[73.30264734404454, "o", "n"]
[73.33264734404455, "o", " "]
[73.36264734404455, "o", "a"]
[73.39264734404455, "o", "n"]
[73.42264734404455, "o", "a"]
[73.45264734404455, "o", "l"]
[73.48264734404455, "o", "y"]
[73.51264734404455, "o", "z"]
[73.54264734404455, "o", "e"]
[73.57264734404455, "o", "."]
[73.60264734404456, "o", "p"]
[73.63264734404456, "o", "y"]
[73.66264734404456, "o", "\r\n"]
[73.69264734404456, "o", "\u001b[0m"]
[73.72264734404456, "o", "\r\n"]
[73.72347417967688, "o", "import scipy.stats as ss\r\n"]
[73.72348633902442, "o", "\r\n"]
[73.72349277632605, "o", "from splitgraph.core.repository import Repository\r\n"]
[73.72350183623206, "o", "from splitgraph.ingestion.pandas import sql_to_df\r\n"]
[73.72350731985938, "o", "\r\n"]
[73.7235128034867, "o", "# Load the dataset we created into Pandas\r\n"]
[73.72351828711402, "o", "image = Repository(\"\", \"qoz_vote_fraction\").images[\"latest\"]\r\n"]
[73.72352377074134, "o", "df = sql_to_df(\"SELECT * FROM qoz_vote_fraction\", image=image, use_lq=True)\r\n"]
[73.7235287775315, "o", "print(df)\r\n"]
[73.72353354590308, "o", "\r\n"]
[73.72353879111182, "o", "# Is there a correlation between the Trump vote fraction and the fraction of\r\n"]
[73.72354427473914, "o", "# QOZ-qualified tracts in every county?\r\n"]
[73.7235492815293, "o", "print(ss.linregress(df[\"trump_vote_fraction\"], df[\"qoz_tract_fraction\"]))\r\n"]
[74.7235492815293, "o", "     county_id  qoz_tract_fraction  ...  clinton_vote_fraction  total_votes\r\n"]
[74.7235812296189, "o", "0        01001            0.083333  ...               0.160432      37000.0\r\n"]
[74.72358623640906, "o", "1        01003            0.187500  ...               0.125629     146925.0\r\n"]
[74.72359076636207, "o", "2        01005            0.111111  ...               0.294998      16512.0\r\n"]
[74.72359458105933, "o", "3        01007            0.250000  ...               0.134927      13889.0\r\n"]
[74.7235983957566, "o", "4        01009            0.111111  ...               0.055430      38788.0\r\n"]
[74.72360149519812, "o", "...        ...                 ...  ...                    ...          ...\r\n"]
[74.72360507147681, "o", "3105     56037            0.083333  ...               0.188616      17130.0\r\n"]
[74.72360912459266, "o", "3106     56039            0.000000  ...               0.579235      12627.0\r\n"]
[74.72361293928992, "o", "3107     56041            0.333333  ...               0.141913       8470.0\r\n"]
[74.72361651556861, "o", "3108     56043            0.333333  ...               0.139486       3814.0\r\n"]
[74.7236200918473, "o", "3109     56045            0.000000  ...               0.084799       3526.0\r\n"]
[74.72362509863746, "o", "\r\n"]
[74.72362867491614, "o", "[3110 rows x 5 columns]\r\n"]
[74.72768322127234, "o", "LinregressResult(slope=-0.06466443467922357, intercept=0.17986166619568594, rvalue=-0.05997034165339083, pvalue=0.0008196991887479718, stderr=0.019306613029180478)\r\n"]
[74.75768322127234, "o", "\u001b[1m"]
[74.78768322127235, "o", "\u001b[36m"]
[74.81768322127235, "o", "\u001b[91m"]
[74.84768322127235, "o", "$"]
[74.87768322127235, "o", " "]
[74.90768322127235, "o", "\u001b[0m"]