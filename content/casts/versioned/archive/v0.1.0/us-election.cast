{"version": 2, "width": 100, "height": 60, "env": {"TERM": "xterm-256color", "SHELL": "/bin/zsh"}, "timestamp": 1584661787, "metadata": {"tss": [{"h": "This example will use Splitgraph to build a dataset that correlates, for every US county,", "ts": 0.06}, {"h": "Now, build the dataset: the Splitgraph engine will automatically download the required data", "ts": 32.38857142857143}, {"h": "Inspect the dataset metadata", "ts": 46.43476929119664}, {"h": "Get the data for New York County (FIPS 36061)", "ts": 63.420483576910925}, {"h": "Do a quick analysis of the dataset.", "ts": 73.01649290766059}]}}
[0.03, "o", "\u001b[H"]
[0.06, "o", "\u001b[J"]
[0.09, "o", "\u001b[1m\u001b[36m\u001b[91m$ # This example will use Splitgraph to build a dataset that correlates, for every US county,"]
[0.12, "o", "\r\n"]
[0.15, "o", "$ # its voting pattern in the 2016 US Presidential election with the amount of\r\n"]
[0.18, "o", "$ # Qualified Opportunity Zone areas in it.\r\n"]
[0.21, "o", "$"]
[0.24, "o", " "]
[0.27, "o", "#"]
[0.30000000000000004, "o", "\r\n"]
[0.33000000000000007, "o", "$ # First, examine the Splitfile used to build the dataset.\r\n"]
[0.3600000000000001, "o", "$"]
[0.3900000000000001, "o", " "]
[0.42000000000000015, "o", "c"]
[0.4500000000000002, "o", "a"]
[0.4800000000000002, "o", "t"]
[0.5100000000000002, "o", " "]
[0.5400000000000003, "o", "q"]
[0.5700000000000003, "o", "o"]
[0.6000000000000003, "o", "z"]
[0.6300000000000003, "o", "_"]
[0.6600000000000004, "o", "v"]
[0.6900000000000004, "o", "o"]
[0.7200000000000004, "o", "t"]
[0.7500000000000004, "o", "e"]
[0.7800000000000005, "o", "_"]
[0.8100000000000005, "o", "f"]
[0.8400000000000005, "o", "r"]
[0.8700000000000006, "o", "a"]
[0.9000000000000006, "o", "c"]
[0.9300000000000006, "o", "t"]
[0.9600000000000006, "o", "i"]
[0.9900000000000007, "o", "o"]
[1.0200000000000007, "o", "n"]
[1.0500000000000007, "o", "."]
[1.0800000000000007, "o", "s"]
[1.1100000000000008, "o", "p"]
[1.1400000000000008, "o", "l"]
[1.1700000000000008, "o", "i"]
[1.2000000000000008, "o", "t"]
[1.2300000000000009, "o", "f"]
[1.260000000000001, "o", "i"]
[1.290000000000001, "o", "l"]
[1.320000000000001, "o", "e"]
[1.350000000000001, "o", "\r\n"]
[1.380000000000001, "o", "\u001b[0m"]
[1.410000000000001, "o", "\r\n"]
[1.411492738723756, "o", "# Calculate the number of Census tracts in each county.\r\n"]
[1.411845121383668, "o", "# See the README for data sources.\r\n"]
[1.4118784999847422, "o", "\r\n"]
[1.4122447109222422, "o", "FROM splitgraph/census IMPORT {\r\n"]
[1.4126116371154795, "o", "     SELECT COUNT(*) AS total_tract_count,\r\n"]
[1.413260850906373, "o", "         substring(lpad(\"TractId\"::text, 11, '0') from 0 for 6) AS county_id\r\n"]
[1.41376319885254, "o", "     FROM acs2017_census_tract_data GROUP BY county_id\r\n"]
[1.4139477348327647, "o", "} AS county_tracts\r\n"]
[1.4139734840393077, "o", "\r\n"]
[1.4139925575256358, "o", "\r\n"]
[1.4145390129089366, "o", "# Calculate the number of QOZ-eligible census tracts in each county\r\n"]
[1.4145685768127452, "o", "\r\n"]
[1.41481939315796, "o", "FROM splitgraph/qoz IMPORT {\r\n"]
[1.4151791667938243, "o", "    SELECT COUNT(*) AS qoz_tract_count,\r\n"]
[1.4160808658599864, "o", "        substring(lpad(\"Census Tract Number\"::text, 11, '0') from 0 for 6) AS county_id\r\n"]
[1.4164916610717784, "o", "    FROM qoz GROUP BY county_id\r\n"]
[1.4165007209777842, "o", "} AS qoz_tracts\r\n"]
[1.4165052509307872, "o", "\r\n"]
[1.4165088272094737, "o", "\r\n"]
[1.4165126419067393, "o", "# Summarize the Trump/Clinton vote fraction in each county.\r\n"]
[1.4165162181854258, "o", "\r\n"]
[1.416526231765748, "o", "FROM splitgraph/2016_election IMPORT {\r\n"]
[1.416530523300172, "o", "    WITH\r\n"]
[1.4165345764160167, "o", "        by_candidate AS (SELECT\r\n"]
[1.4165722465515147, "o", "                lpad(county_fips::text, 5, '0') AS county_id,\r\n"]
[1.4165772533416758, "o", "                candidate, SUM(votes) AS votes\r\n"]
[1.4165813064575206, "o", "                FROM precinct_results GROUP BY county_id, candidate),\r\n"]
[1.4165851211547862, "o", "        total_votes AS (SELECT\r\n"]
[1.4165896511077891, "o", "                county_id, SUM(votes) AS votes FROM by_candidate GROUP BY county_id),\r\n"]
[1.4165934658050547, "o", "        trump_votes AS (SELECT\r\n"]
[1.4165972805023204, "o", "                county_id, votes FROM by_candidate WHERE candidate = 'Donald Trump'),\r\n"]
[1.416600856781007, "o", "        clinton_votes AS (SELECT\r\n"]
[1.4166046714782725, "o", "                county_id, votes FROM by_candidate WHERE candidate = 'Hillary Clinton')\r\n"]
[1.41660800933838, "o", "        SELECT v.county_id, (t.votes::numeric / v.votes) AS trump_vote_fraction,\r\n"]
[1.4166113471984874, "o", "            (hc.votes::numeric / v.votes) AS clinton_vote_fraction,\r\n"]
[1.416615161895753, "o", "            v.votes AS total_votes\r\n"]
[1.4166187381744395, "o", "        FROM total_votes v JOIN trump_votes t ON v.county_id = t.county_id\r\n"]
[1.416622314453126, "o", "            JOIN clinton_votes hc ON hc.county_id = v.county_id\r\n"]
[1.4166256523132335, "o", "} AS vote_fraction\r\n"]
[1.41662922859192, "o", "\r\n"]
[1.4166325664520274, "o", "\r\n"]
[1.416636142730714, "o", "# Create the final table: join the fraction of QOZ-eligible tracts in every county\r\n"]
[1.4166401958465586, "o", "# with the vote fraction for each candidate.\r\n"]
[1.416643533706666, "o", "\r\n"]
[1.4166471099853526, "o", "SQL { CREATE TABLE qoz_vote_fraction AS\r\n"]
[1.4166511631011973, "o", "    SELECT v.county_id, (COALESCE(q.qoz_tract_count::numeric, 0.0) / t.total_tract_count)\r\n"]
[1.4166547393798838, "o", "        AS qoz_tract_fraction, trump_vote_fraction, clinton_vote_fraction, total_votes\r\n"]
[1.4166580772399913, "o", "    FROM vote_fraction v\r\n"]
[1.4166616535186778, "o", "    JOIN county_tracts t ON t.county_id = v.county_id\r\n"]
[1.4166654682159434, "o", "    LEFT JOIN qoz_tracts q ON t.county_id = q.county_id;\r\n"]
[1.41666904449463, "o", "    ALTER TABLE qoz_vote_fraction ADD PRIMARY KEY (county_id);\r\n"]
[1.4166726207733165, "o", "}\r\n"]
[1.4466726207733165, "o", "\u001b[1m"]
[1.4766726207733165, "o", "\u001b[36m"]
[1.5066726207733165, "o", "\u001b[91m"]
[1.5366726207733166, "o", "$"]
[1.5666726207733166, "o", " "]
[1.5966726207733166, "o", "\u001b[0m"]
[32.35857142857143, "o", "\u001b[H"]
[32.38857142857143, "o", "\u001b[J"]
[32.41857142857143, "o", "\u001b[1m\u001b[36m\u001b[91m$ # Now, build the dataset: the Splitgraph engine will automatically download the required data"]
[32.448571428571434, "o", "\r\n"]
[32.478571428571435, "o", "$ # and run the queries in the Splitfile to produce the final data image.\r\n"]
[32.508571428571436, "o", "$"]
[32.53857142857144, "o", " "]
[32.56857142857144, "o", "s"]
[32.59857142857144, "o", "g"]
[32.62857142857144, "o", "r"]
[32.65857142857144, "o", " "]
[32.68857142857144, "o", "b"]
[32.718571428571444, "o", "u"]
[32.748571428571445, "o", "i"]
[32.778571428571446, "o", "l"]
[32.80857142857145, "o", "d"]
[32.83857142857145, "o", " "]
[32.86857142857145, "o", "q"]
[32.89857142857145, "o", "o"]
[32.92857142857145, "o", "z"]
[32.95857142857145, "o", "_"]
[32.988571428571454, "o", "v"]
[33.018571428571455, "o", "o"]
[33.04857142857146, "o", "t"]
[33.07857142857146, "o", "e"]
[33.10857142857146, "o", "_"]
[33.13857142857146, "o", "f"]
[33.16857142857146, "o", "r"]
[33.19857142857146, "o", "a"]
[33.22857142857146, "o", "c"]
[33.258571428571464, "o", "t"]
[33.288571428571466, "o", "i"]
[33.31857142857147, "o", "o"]
[33.34857142857147, "o", "n"]
[33.37857142857147, "o", "."]
[33.40857142857147, "o", "s"]
[33.43857142857147, "o", "p"]
[33.46857142857147, "o", "l"]
[33.49857142857147, "o", "i"]
[33.528571428571475, "o", "t"]
[33.558571428571476, "o", "f"]
[33.58857142857148, "o", "i"]
[33.61857142857148, "o", "l"]
[33.64857142857148, "o", "e"]
[33.67857142857148, "o", " "]
[33.70857142857148, "o", "-"]
[33.73857142857148, "o", "o"]
[33.768571428571484, "o", " "]
[33.798571428571485, "o", "q"]
[33.828571428571486, "o", "o"]
[33.85857142857149, "o", "z"]
[33.88857142857149, "o", "_"]
[33.91857142857149, "o", "v"]
[33.94857142857149, "o", "o"]
[33.97857142857149, "o", "t"]
[34.00857142857149, "o", "e"]
[34.038571428571494, "o", "_"]
[34.068571428571495, "o", "f"]
[34.098571428571496, "o", "r"]
[34.1285714285715, "o", "a"]
[34.1585714285715, "o", "c"]
[34.1885714285715, "o", "t"]
[34.2185714285715, "o", "i"]
[34.2485714285715, "o", "o"]
[34.2785714285715, "o", "n"]
[34.308571428571504, "o", "\r\n"]
[34.338571428571505, "o", "\u001b[0m"]
[34.36857142857151, "o", "\r\n"]
[34.918848900113865, "o", "Executing Splitfile qoz_vote_fraction.splitfile with arguments {}\r\n"]
[34.944799570356174, "o", "\u001b[1m\r\n"]
[34.94481149128513, "o", "Step 1/4 : FROM splitgraph/census IMPORT {     SELECT COUNT(*) AS t...\u001b[0m\r\n"]
[34.96331587246494, "o", "Resolving repository splitgraph/census\r\n"]
[35.96331587246494, "o", "Importing 1 table(s) from splitgraph/census:17a596cf4642 into qoz_vote_fraction\r\n"]
[36.96331587246494, "o", " ---> 65732f0b5673\r\n"]
[36.9686543028696, "o", "\u001b[1m\r\n"]
[36.96867075375156, "o", "Step 2/4 : FROM splitgraph/qoz IMPORT {    SELECT COUNT(*) AS qoz_t...\u001b[0m\r\n"]
[36.97512474468784, "o", "Resolving repository splitgraph/qoz\r\n"]
[37.97512474468784, "o", "Importing 1 table(s) from splitgraph/qoz:5818ea35bf99 into qoz_vote_fraction\r\n"]
[38.97512474468784, "o", " ---> 59258e50b49d\r\n"]
[38.98011341503696, "o", "\u001b[1m\r\n"]
[38.980287222181126, "o", "Step 3/4 : FROM splitgraph/2016_election IMPORT {    WITH        b...\u001b[0m\r\n"]
[38.986420301709934, "o", "Resolving repository splitgraph/2016_election\r\n"]
[39.986420301709934, "o", "Importing 1 table(s) from splitgraph/2016_election:3835145ada3f into qoz_vote_fraction\r\n"]
[40.986420301709934, "o", " ---> 71664ba11373\r\n"]
[40.991339830671116, "o", "\u001b[1m\r\n"]
[40.99147620609836, "o", "Step 4/4 : SQL { CREATE TABLE qoz_vote_fraction AS    SELECT v.coun...\u001b[0m\r\n"]
[41.00100627354221, "o", "Executing SQL...\r\n"]
[41.19476929119663, "o", " ---> 63a21276dc4d\r\n"]
[41.22476929119663, "o", "\u001b[1m"]
[41.25476929119663, "o", "\u001b[36m"]
[41.28476929119663, "o", "\u001b[91m"]
[41.31476929119663, "o", "$"]
[41.344769291196634, "o", " "]
[41.374769291196635, "o", "\u001b[0m"]
[46.40476929119664, "o", "\u001b[H"]
[46.43476929119664, "o", "\u001b[J"]
[46.46476929119664, "o", "\u001b[1m\u001b[36m\u001b[91m$ # Inspect the dataset metadata"]
[46.49476929119664, "o", "\r\n"]
[46.52476929119664, "o", "$"]
[46.55476929119664, "o", " "]
[46.58476929119664, "o", "s"]
[46.614769291196644, "o", "g"]
[46.644769291196646, "o", "r"]
[46.67476929119665, "o", " "]
[46.70476929119665, "o", "s"]
[46.73476929119665, "o", "h"]
[46.76476929119665, "o", "o"]
[46.79476929119665, "o", "w"]
[46.82476929119665, "o", " "]
[46.854769291196654, "o", "q"]
[46.884769291196655, "o", "o"]
[46.914769291196656, "o", "z"]
[46.94476929119666, "o", "_"]
[46.97476929119666, "o", "v"]
[47.00476929119666, "o", "o"]
[47.03476929119666, "o", "t"]
[47.06476929119666, "o", "e"]
[47.09476929119666, "o", "_"]
[47.124769291196664, "o", "f"]
[47.154769291196665, "o", "r"]
[47.184769291196666, "o", "a"]
[47.21476929119667, "o", "c"]
[47.24476929119667, "o", "t"]
[47.27476929119667, "o", "i"]
[47.30476929119667, "o", "o"]
[47.33476929119667, "o", "n"]
[47.36476929119667, "o", "\r\n"]
[47.394769291196674, "o", "$"]
[47.424769291196675, "o", " "]
[47.454769291196676, "o", "s"]
[47.48476929119668, "o", "g"]
[47.51476929119668, "o", "r"]
[47.54476929119668, "o", " "]
[47.57476929119668, "o", "t"]
[47.60476929119668, "o", "a"]
[47.63476929119668, "o", "b"]
[47.664769291196684, "o", "l"]
[47.694769291196685, "o", "e"]
[47.72476929119669, "o", " "]
[47.75476929119669, "o", "q"]
[47.78476929119669, "o", "o"]
[47.81476929119669, "o", "z"]
[47.84476929119669, "o", "_"]
[47.87476929119669, "o", "v"]
[47.90476929119669, "o", "o"]
[47.934769291196694, "o", "t"]
[47.964769291196696, "o", "e"]
[47.9947692911967, "o", "_"]
[48.0247692911967, "o", "f"]
[48.0547692911967, "o", "r"]
[48.0847692911967, "o", "a"]
[48.1147692911967, "o", "c"]
[48.1447692911967, "o", "t"]
[48.174769291196704, "o", "i"]
[48.204769291196705, "o", "o"]
[48.234769291196706, "o", "n"]
[48.26476929119671, "o", " "]
[48.29476929119671, "o", "q"]
[48.32476929119671, "o", "o"]
[48.35476929119671, "o", "z"]
[48.38476929119671, "o", "_"]
[48.41476929119671, "o", "v"]
[48.444769291196714, "o", "o"]
[48.474769291196715, "o", "t"]
[48.504769291196716, "o", "e"]
[48.53476929119672, "o", "_"]
[48.56476929119672, "o", "f"]
[48.59476929119672, "o", "r"]
[48.62476929119672, "o", "a"]
[48.65476929119672, "o", "c"]
[48.68476929119672, "o", "t"]
[48.714769291196724, "o", "i"]
[48.744769291196725, "o", "o"]
[48.774769291196726, "o", "n"]
[48.80476929119673, "o", "\r\n"]
[48.83476929119673, "o", "\u001b[0m"]
[48.86476929119673, "o", "\r\n"]
[49.41081554821577, "o", "Image qoz_vote_fraction:63a21276dc4d3a237bfc67afc1ad85a3dadc9391a53a7290d610249c9957ce04\r\n"]
[49.4108300917491, "o", " CREATE TABLE qoz_vote_fraction AS\r\n"]
[49.41083438328352, "o", "    SELECT v.county_id, (COALESCE(q.qoz_tract_count::numeric, 0.0) / t.total_tract_count)\r\n"]
[49.410840343748, "o", "        AS qoz_tract_fraction, trump_vote_fraction, clinton_vote_fraction, total_votes\r\n"]
[49.41135532787886, "o", "    FROM vote_fraction v\r\n"]
[49.41136581829634, "o", "    JOIN county_tracts t ON t.county_id = v.county_id\r\n"]
[49.41137058666792, "o", "    LEFT JOIN qoz_tracts q ON t.county_id = q.county_id;\r\n"]
[49.411374878202345, "o", "    ALTER TABLE qoz_vote_fraction ADD PRIMARY KEY (county_id);\r\n"]
[49.41137940815535, "o", "\r\n"]
[49.41138346127119, "o", "Created at 2020-03-19T23:50:27.827905\r\n"]
[49.412420582090284, "o", "Size: 226.33 KiB\r\n"]
[49.41243703297224, "o", "Parent: 71664ba113732126fcccb1951c7cd0ac11589f6f8740b8b6b34c5d7ca177ed1e\r\n"]
[49.412441801343824, "o", "\r\n"]
[49.41244633129683, "o", "Tables:\r\n"]
[49.41312224796858, "o", "  county_tracts\r\n"]
[49.413131784711744, "o", "  qoz_tracts\r\n"]
[49.41313893726912, "o", "  qoz_vote_fraction\r\n"]
[49.413142513547804, "o", "  vote_fraction\r\n"]
[49.95155627659407, "o", "Table qoz_vote_fraction:63a21276dc4d3a237bfc67afc1ad85a3dadc9391a53a7290d610249c9957ce04/qoz_vote_fraction\r\n"]
[49.95200951031294, "o", "\r\n"]
[49.958209823881056, "o", "Size: 106.94 KiB\r\n"]
[49.959377836500074, "o", "Rows: 3110\r\n"]
[49.95938427380171, "o", "Columns: \r\n"]
[49.95938904217329, "o", "  county_id (text, PK)\r\n"]
[49.959393333707716, "o", "  qoz_tract_fraction (numeric)\r\n"]
[49.95940072468367, "o", "  trump_vote_fraction (numeric)\r\n"]
[49.959404300962355, "o", "  clinton_vote_fraction (numeric)\r\n"]
[49.95940787724104, "o", "  total_votes (numeric)\r\n"]
[49.95942194393721, "o", "\r\n"]
[49.959425520215895, "o", "Objects: \r\n"]
[49.95942933491316, "o", "  o70f017c3ad5c2b1c7ad91b6d751392bb8710d8bf5e0addf2e42a96f61bef43\r\n"]
[49.98942933491316, "o", "\u001b[1m"]
[50.01942933491316, "o", "\u001b[36m"]
[50.049429334913164, "o", "\u001b[91m"]
[50.079429334913165, "o", "$"]
[50.109429334913166, "o", " "]
[50.13942933491317, "o", "\u001b[0m"]
[63.390483576910924, "o", "\u001b[H"]
[63.420483576910925, "o", "\u001b[J"]
[63.450483576910926, "o", "\u001b[1m\u001b[36m\u001b[91m$ # Get the data for New York County (FIPS 36061)"]
[63.48048357691093, "o", "\r\n"]
[63.51048357691093, "o", "$"]
[63.54048357691093, "o", " "]
[63.57048357691093, "o", "s"]
[63.60048357691093, "o", "g"]
[63.63048357691093, "o", "r"]
[63.660483576910934, "o", " "]
[63.690483576910935, "o", "s"]
[63.72048357691094, "o", "q"]
[63.75048357691094, "o", "l"]
[63.78048357691094, "o", " "]
[63.81048357691094, "o", "-"]
[63.84048357691094, "o", "s"]
[63.87048357691094, "o", " "]
[63.90048357691094, "o", "q"]
[63.930483576910945, "o", "o"]
[63.960483576910946, "o", "z"]
[63.99048357691095, "o", "_"]
[64.02048357691095, "o", "v"]
[64.05048357691095, "o", "o"]
[64.08048357691095, "o", "t"]
[64.11048357691095, "o", "e"]
[64.14048357691095, "o", "_"]
[64.17048357691095, "o", "f"]
[64.20048357691095, "o", "r"]
[64.23048357691096, "o", "a"]
[64.26048357691096, "o", "c"]
[64.29048357691096, "o", "t"]
[64.32048357691096, "o", "i"]
[64.35048357691096, "o", "o"]
[64.38048357691096, "o", "n"]
[64.41048357691096, "o", " "]
[64.44048357691096, "o", "\\"]
[64.47048357691096, "o", "\r\n    "]
[64.50048357691097, "o", "\""]
[64.53048357691097, "o", "S"]
[64.56048357691097, "o", "E"]
[64.59048357691097, "o", "L"]
[64.62048357691097, "o", "E"]
[64.65048357691097, "o", "C"]
[64.68048357691097, "o", "T"]
[64.71048357691097, "o", " "]
[64.74048357691098, "o", "r"]
[64.77048357691098, "o", "o"]
[64.80048357691098, "o", "w"]
[64.83048357691098, "o", "_"]
[64.86048357691098, "o", "t"]
[64.89048357691098, "o", "o"]
[64.92048357691098, "o", "_"]
[64.95048357691098, "o", "j"]
[64.98048357691098, "o", "s"]
[65.01048357691099, "o", "o"]
[65.04048357691099, "o", "n"]
[65.07048357691099, "o", "("]
[65.10048357691099, "o", "d"]
[65.13048357691099, "o", ")"]
[65.16048357691099, "o", " "]
[65.19048357691099, "o", "F"]
[65.220483576911, "o", "R"]
[65.250483576911, "o", "O"]
[65.280483576911, "o", "M"]
[65.310483576911, "o", " "]
[65.340483576911, "o", "("]
[65.370483576911, "o", "S"]
[65.400483576911, "o", "E"]
[65.430483576911, "o", "L"]
[65.460483576911, "o", "E"]
[65.490483576911, "o", "C"]
[65.520483576911, "o", "T"]
[65.550483576911, "o", " "]
[65.580483576911, "o", "*"]
[65.61048357691101, "o", " "]
[65.64048357691101, "o", "F"]
[65.67048357691101, "o", "R"]
[65.70048357691101, "o", "O"]
[65.73048357691101, "o", "M"]
[65.76048357691101, "o", " "]
[65.79048357691102, "o", "q"]
[65.82048357691102, "o", "o"]
[65.85048357691102, "o", "z"]
[65.88048357691102, "o", "_"]
[65.91048357691102, "o", "v"]
[65.94048357691102, "o", "o"]
[65.97048357691102, "o", "t"]
[66.00048357691102, "o", "e"]
[66.03048357691102, "o", "_"]
[66.06048357691103, "o", "f"]
[66.09048357691103, "o", "r"]
[66.12048357691103, "o", "a"]
[66.15048357691103, "o", "c"]
[66.18048357691103, "o", "t"]
[66.21048357691103, "o", "i"]
[66.24048357691103, "o", "o"]
[66.27048357691103, "o", "n"]
[66.30048357691103, "o", " "]
[66.33048357691104, "o", "W"]
[66.36048357691104, "o", "H"]
[66.39048357691104, "o", "E"]
[66.42048357691104, "o", "R"]
[66.45048357691104, "o", "E"]
[66.48048357691104, "o", " "]
[66.51048357691104, "o", "c"]
[66.54048357691104, "o", "o"]
[66.57048357691104, "o", "u"]
[66.60048357691105, "o", "n"]
[66.63048357691105, "o", "t"]
[66.66048357691105, "o", "y"]
[66.69048357691105, "o", "_"]
[66.72048357691105, "o", "i"]
[66.75048357691105, "o", "d"]
[66.78048357691105, "o", " "]
[66.81048357691105, "o", "="]
[66.84048357691105, "o", " "]
[66.87048357691106, "o", "'"]
[66.90048357691106, "o", "3"]
[66.93048357691106, "o", "6"]
[66.96048357691106, "o", "0"]
[66.99048357691106, "o", "6"]
[67.02048357691106, "o", "1"]
[67.05048357691106, "o", "'"]
[67.08048357691106, "o", ")"]
[67.11048357691107, "o", " "]
[67.14048357691107, "o", "d"]
[67.17048357691107, "o", "\""]
[67.20048357691107, "o", "\r\n"]
[67.23048357691107, "o", "\u001b[0m"]
[67.26048357691107, "o", "\r\n"]
[67.77649290766058, "o", "{'county_id': '36061', 'qoz_tract_fraction': 0.125, 'trump_vote_fraction': 0.08865095716546313, 'clinton_vote_fraction': 0.7905445350569275, 'total_votes': 732423}\r\n"]
[67.80649290766058, "o", "\u001b[1m"]
[67.83649290766058, "o", "\u001b[36m"]
[67.86649290766059, "o", "\u001b[91m"]
[67.89649290766059, "o", "$"]
[67.92649290766059, "o", " "]
[67.95649290766059, "o", "\u001b[0m"]
[72.98649290766059, "o", "\u001b[H"]
[73.01649290766059, "o", "\u001b[J"]
[73.04649290766059, "o", "\u001b[1m\u001b[36m\u001b[91m$ # Do a quick analysis of the dataset."]
[73.0764929076606, "o", "\r\n"]
[73.1064929076606, "o", "$"]
[73.1364929076606, "o", " "]
[73.1664929076606, "o", "c"]
[73.1964929076606, "o", "a"]
[73.2264929076606, "o", "t"]
[73.2564929076606, "o", " "]
[73.2864929076606, "o", "a"]
[73.3164929076606, "o", "n"]
[73.3464929076606, "o", "a"]
[73.3764929076606, "o", "l"]
[73.4064929076606, "o", "y"]
[73.43649290766061, "o", "z"]
[73.46649290766061, "o", "e"]
[73.49649290766061, "o", "."]
[73.52649290766061, "o", "p"]
[73.55649290766061, "o", "y"]
[73.58649290766061, "o", "\r\n"]
[73.61649290766061, "o", "$"]
[73.64649290766062, "o", " "]
[73.67649290766062, "o", "p"]
[73.70649290766062, "o", "y"]
[73.73649290766062, "o", "t"]
[73.76649290766062, "o", "h"]
[73.79649290766062, "o", "o"]
[73.82649290766062, "o", "n"]
[73.85649290766062, "o", " "]
[73.88649290766062, "o", "a"]
[73.91649290766063, "o", "n"]
[73.94649290766063, "o", "a"]
[73.97649290766063, "o", "l"]
[74.00649290766063, "o", "y"]
[74.03649290766063, "o", "z"]
[74.06649290766063, "o", "e"]
[74.09649290766063, "o", "."]
[74.12649290766063, "o", "p"]
[74.15649290766063, "o", "y"]
[74.18649290766064, "o", "\r\n"]
[74.21649290766064, "o", "\u001b[0m"]
[74.24649290766064, "o", "\r\n"]
[74.24723129000012, "o", "import scipy.stats as ss\r\n"]
[74.24723820413891, "o", "\r\n"]
[74.24724130358044, "o", "from splitgraph.core.repository import Repository\r\n"]
[74.24724416460339, "o", "from splitgraph.ingestion.pandas import sql_to_df\r\n"]
[74.2472463103706, "o", "\r\n"]
[74.24724893297497, "o", "# Load the dataset we created into Pandas\r\n"]
[74.24725107874218, "o", "image = Repository(\"\", \"qoz_vote_fraction\").images[\"latest\"]\r\n"]
[74.24725346292797, "o", "df = sql_to_df(\"SELECT * FROM qoz_vote_fraction\", image=image, use_lq=True)\r\n"]
[74.24725608553234, "o", "print(df)\r\n"]
[74.24725823129955, "o", "\r\n"]
[74.24726061548535, "o", "# Is there a correlation between the Trump vote fraction and the fraction of\r\n"]
[74.24726252283398, "o", "# QOZ-qualified tracts in every county?\r\n"]
[74.24726466860119, "o", "print(ss.linregress(df[\"trump_vote_fraction\"], df[\"qoz_tract_fraction\"]))\r\n"]
[75.24726466860119, "o", "     county_id  qoz_tract_fraction  ...  clinton_vote_fraction  total_votes\r\n"]
[75.24727444376293, "o", "0        01001            0.083333  ...               0.160432      37000.0\r\n"]
[75.2472794505531, "o", "1        01003            0.187500  ...               0.125629     146925.0\r\n"]
[75.2472839805061, "o", "2        01005            0.111111  ...               0.294998      16512.0\r\n"]
[75.24728779520336, "o", "3        01007            0.250000  ...               0.134927      13889.0\r\n"]
[75.24729208673779, "o", "4        01009            0.111111  ...               0.055430      38788.0\r\n"]
[75.24729661669079, "o", "...        ...                 ...  ...                    ...          ...\r\n"]
[75.24730066980663, "o", "3105     56037            0.083333  ...               0.188616      17130.0\r\n"]
[75.2473044845039, "o", "3106     56039            0.000000  ...               0.579235      12627.0\r\n"]
[75.24730829920117, "o", "3107     56041            0.333333  ...               0.141913       8470.0\r\n"]
[75.24731211389843, "o", "3108     56043            0.333333  ...               0.139486       3814.0\r\n"]
[75.24731545175854, "o", "3109     56045            0.000000  ...               0.084799       3526.0\r\n"]
[75.2473204585487, "o", "\r\n"]
[75.24732427324597, "o", "[3110 rows x 5 columns]\r\n"]
[75.24811892237011, "o", "LinregressResult(slope=-0.06466443467922357, intercept=0.17986166619568594, rvalue=-0.05997034165339083, pvalue=0.0008196991887479718, stderr=0.019306613029180478)\r\n"]
[75.27811892237011, "o", "\u001b[1m"]
[75.30811892237011, "o", "\u001b[36m"]
[75.33811892237011, "o", "\u001b[91m"]
[75.36811892237012, "o", "$"]
[75.39811892237012, "o", " "]
[75.42811892237012, "o", "\u001b[0m"]