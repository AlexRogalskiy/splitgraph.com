
import "@splitgraph/design/css/sphinxtheme.css";

export const meta = {
  title: "splitgraph.ingestion package",
  id: "splitgraph.ingestion package"
};

<div className=" rst-content"><nav className="toc"><ol className="toc-level toc-level-1"><li className="toc-item toc-item-h2"><a className="toc-link toc-link-h2" href="#module-contents">Module contents</a></li><li className="toc-item toc-item-h2"><a className="toc-link toc-link-h2" href="#submodules">Submodules</a><ol className="toc-level toc-level-2"><li className="toc-item toc-item-h2"><a className="toc-link toc-link-h2" href="#splitgraphingestionpandas-module">splitgraph.ingestion.pandas module</a></li></ol></li></ol></nav><div className="section" id="module-splitgraph.ingestion">
<span id="module-contents"></span><h2 id="module-contents">Module contents<a className="headerlink" href="#module-splitgraph.ingestion" title="Permalink to this headline">¶</a></h2>
</div><div className="section" id="splitgraph-ingestion-package">

<div className="section" id="submodules">
<h2 id="submodules">Submodules<a className="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div className="section" id="module-splitgraph.ingestion.pandas">
<span id="splitgraph-ingestion-pandas-module"></span><h2 id="splitgraphingestionpandas-module">splitgraph.ingestion.pandas module<a className="headerlink" href="#module-splitgraph.ingestion.pandas" title="Permalink to this headline">¶</a></h2>
<p>Routines that ingest/export CSV files to/from Splitgraph images using Pandas</p>
<dl className="function">
<dt id="splitgraph.ingestion.pandas.df_to_table">
<code className="sig-prename descclassname">splitgraph.ingestion.pandas.</code><code className="sig-name descname">df_to_table</code><span className="sig-paren">(</span><em className="sig-param">df: Union[pandas.core.series.Series, pandas.core.frame.DataFrame], repository: splitgraph.core.repository.Repository, table: str, if_exists: str = 'patch', schema_check: bool = True</em><span className="sig-paren">)</span> → None<a className="headerlink" href="#splitgraph.ingestion.pandas.df_to_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes a Pandas DataFrame to a checked-out Splitgraph table. Doesn’t create a new image.</p>
<dl className="field-list simple">
<dt className="field-odd">Parameters</dt>
<dd className="field-odd"><ul className="simple">
<li><p><strong>df</strong> – Pandas DataFrame to insert.</p></li>
<li><p><strong>repository</strong> – Splitgraph Repository object. Must be checked out.</p></li>
<li><p><strong>table</strong> – Table name.</p></li>
<li><p><strong>if_exists</strong> – Behaviour if the table already exists: ‘patch’ means that primary keys that already exist in the</p></li>
</ul>
</dd>
</dl>
<p>table will be updated and ones that don’t will be inserted. ‘replace’ means that the table will be dropped and
recreated.
:param schema_check: If False, skips checking that the dataframe is compatible with the target schema.</p>
</dd></dl>

<dl className="function">
<dt id="splitgraph.ingestion.pandas.df_to_table_fast">
<code className="sig-prename descclassname">splitgraph.ingestion.pandas.</code><code className="sig-name descname">df_to_table_fast</code><span className="sig-paren">(</span><em className="sig-param">engine: splitgraph.engine.postgres.engine.PostgresEngine</em>, <em className="sig-param">df: pandas.core.frame.DataFrame</em>, <em className="sig-param">target_schema: str</em>, <em className="sig-param">target_table: str</em><span className="sig-paren">)</span> → None<a className="headerlink" href="#splitgraph.ingestion.pandas.df_to_table_fast" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert a Pandas dataframe into a table with the same schema using COPY FROM (faster than
normal Pandas to SQL insertion).</p>
<dl className="field-list simple">
<dt className="field-odd">Parameters</dt>
<dd className="field-odd"><ul className="simple">
<li><p><strong>engine</strong> – Splitgraph Engine</p></li>
<li><p><strong>df</strong> – Pandas DataFrame</p></li>
<li><p><strong>target_schema</strong> – Schema the target table is located</p></li>
<li><p><strong>target_table</strong> – Name of the target table</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl className="function">
<dt id="splitgraph.ingestion.pandas.sql_to_df">
<code className="sig-prename descclassname">splitgraph.ingestion.pandas.</code><code className="sig-name descname">sql_to_df</code><span className="sig-paren">(</span><em className="sig-param">sql: str</em>, <em className="sig-param">image: Union[splitgraph.core.image.Image</em>, <em className="sig-param">str</em>, <em className="sig-param">None] = None</em>, <em className="sig-param">repository: Optional[splitgraph.core.repository.Repository] = None</em>, <em className="sig-param">use_lq: bool = False</em>, <em className="sig-param">**kwargs</em><span className="sig-paren">)</span> → pandas.core.frame.DataFrame<a className="headerlink" href="#splitgraph.ingestion.pandas.sql_to_df" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes an SQL query against a Splitgraph image, returning the result.</p>
<p>Extra <cite>**kwargs</cite> are passed to Pandas’ <cite>read_sql_query</cite>.</p>
<dl className="field-list simple">
<dt className="field-odd">Parameters</dt>
<dd className="field-odd"><ul className="simple">
<li><p><strong>sql</strong> – SQL query to execute.</p></li>
<li><p><strong>image</strong> – Image object, image hash/tag (<cite>str</cite>) or None (use the currently checked out image).</p></li>
<li><p><strong>repository</strong> – Repository the image belongs to. Must be set if <cite>image</cite> is a hash/tag or None.</p></li>
<li><p><strong>use_lq</strong> – Whether to use layered querying or check out the image if it’s not checked out.</p></li>
</ul>
</dd>
<dt className="field-even">Returns</dt>
<dd className="field-even"><p>A Pandas dataframe.</p>
</dd>
</dl>
</dd></dl>

</div>

</div>
</div>